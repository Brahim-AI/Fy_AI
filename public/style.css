/* --- Variables & Reset --- */
:root {
  --bg-core: #131314;
  --bg-sidebar: #1e1f20;
  --user-bubble-gradient: linear-gradient(135deg, #0ea5e9, #2563eb);
  --neon-blue: #0ea5e9;
  --neon-purple: #818cf8;
  --text-main: #e3e3e3;
  --text-muted: #c4c7c5;
  --border-color: rgba(255, 255, 255, 0.1);
  --input-bg: #1e1f20;
  --glass: rgba(255, 255, 255, 0.05);
}

* { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }

body {
  background-color: var(--bg-core);
  color: var(--text-main);
  height: 100vh;
  display: flex;
  overflow: hidden;
}

/* --- Utilities --- */
.material-symbols-outlined { vertical-align: middle; font-size: 1.2rem; }

/* --- Authentication (Login/Signup) --- */
.auth-container {
  width: 100%; height: 100vh; display: flex; justify-content: center; align-items: center;
  background-color: var(--bg-core); position: relative; overflow: hidden;
}

.auth-box {
  background: rgba(30, 31, 32, 0.7); backdrop-filter: blur(12px);
  padding: 2.5rem; border-radius: 24px; border: 1px solid var(--border-color);
  width: 400px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
  animation: slideUp 0.6s ease; z-index: 10;
}

.auth-box h2 {
  text-align: center; margin-bottom: 2rem; font-weight: 600;
  background: linear-gradient(to right, var(--neon-blue), var(--neon-purple));
  -webkit-background-clip: text; color: transparent;
}

.input-group { position: relative; margin-bottom: 1.2rem; margin-top: 15px; }

.input-group span {
  position: absolute; left: 15px; top: 50%; transform: translateY(-50%);
  color: var(--text-muted); pointer-events: none;
}

input {
  width: 100%; padding: 14px 14px 14px 45px;
  background: rgba(0, 0, 0, 0.3); border: 1px solid var(--border-color);
  color: white; border-radius: 12px; outline: none; transition: 0.3s;
}

input:focus {
  border-color: var(--neon-blue); background: rgba(0, 0, 0, 0.5);
}
input:disabled { opacity: 0.6; cursor: not-allowed; }

button {
  width: 100%; padding: 14px; margin-top: 25px;
  background: var(--user-bubble-gradient); border: none;
  color: white; font-weight: 600; cursor: pointer;
  border-radius: 12px; display: flex; justify-content: center; align-items: center;
  gap: 8px; transition: transform 0.2s, box-shadow 0.2s;
}

button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(14, 165, 233, 0.3); }

/* --- Sidebar --- */
.sidebar {
  width: 260px; background-color: var(--bg-sidebar);
  display: flex; flex-direction: column; padding: 1rem;
  border-right: 1px solid var(--border-color); gap: 10px; z-index: 50;
  transition: transform 0.3s ease;
}

.logo {
  font-size: 1.2rem; font-weight: 600; color: #e3e3e3;
  display: flex; align-items: center; gap: 10px; margin-bottom: 20px; padding-left: 10px;
}

.new-chat-btn {
  background: #282a2c; color: #e3e3e3; border: none;
  padding: 12px 15px; border-radius: 20px; margin-top: 0;
  cursor: pointer; display: flex; align-items: center; gap: 10px;
  font-size: 0.9rem; transition: 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}
.new-chat-btn:hover { background: #333537; transform: none; box-shadow: none; }

.history-label { font-size: 0.75rem; color: #8e918f; font-weight: 600; margin: 15px 0 5px 10px; }
.history-section { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 2px; }

.history-item {
  padding: 10px 15px; border-radius: 20px;
  color: var(--text-muted); cursor: pointer; font-size: 0.9rem;
  display: flex; align-items: center; justify-content: space-between; /* Changed for delete btn */
  gap: 10px; transition: 0.2s;
}
.history-item:hover { background: #282a2c; color: white; }
.history-item.active-chat { background: rgba(14, 165, 233, 0.15); color: #7dd3fc; }

/* Delete Icon Style */
.delete-icon {
    font-size: 1.1rem; color: #888; padding: 4px; border-radius: 50%;
    opacity: 0; transition: 0.2s;
}
.delete-icon:hover { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
.history-item:hover .delete-icon { opacity: 1; }

.user-profile {
  margin-top: auto; padding-top: 15px;
  border-top: 1px solid var(--border-color); width: 100%;
}

.logout-btn {
  width: 100%; background: transparent; color: #ef4444;
  border: 1px solid rgba(239, 68, 68, 0.2); margin-top: 0;
  padding: 12px 15px; border-radius: 12px;
  cursor: pointer; display: flex; align-items: center; justify-content: flex-start;
  gap: 12px; font-size: 0.95rem; font-weight: 500; transition: all 0.2s ease;
}
.logout-btn:hover {
  background: rgba(239, 68, 68, 0.1); border-color: #ef4444;
  transform: translateY(-1px); box-shadow: none;
}

/* --- Main Chat Area --- */
.main-chat {
  flex: 1; display: flex; flex-direction: column; position: relative;
  background-color: var(--bg-core); width: 100%;
}

.chat-header {
  padding: 15px 20px; display: flex; align-items: center; gap: 10px;
  font-weight: 500; color: var(--text-muted); font-size: 1rem;
  border-bottom: 1px solid var(--border-color);
  height: 60px;
}

.mobile-menu-btn {
  display: none; /* Default hidden */
  background: transparent; border: none; color: var(--text-main);
  cursor: pointer; padding: 5px; margin-right: 10px;
  width: auto; margin-top: 0; /* Override generic button */
  box-shadow: none;
}
.mobile-menu-btn:hover { transform: none; box-shadow: none; }

.chat-window {
  flex: 1; overflow-y: auto; padding: 20px 0 100px 0;
  display: flex; flex-direction: column; gap: 25px;
  scroll-behavior: smooth;
}

.message-wrapper {
  width: 100%; max-width: 800px; margin: 0 auto;
  padding: 0 20px; display: flex; gap: 15px;
  animation: slideUp 0.3s ease;
}

.message-wrapper.user-wrapper { justify-content: flex-end; }
.user-message-content {
  background: var(--user-bubble-gradient); color: white;
  padding: 10px 18px; border-radius: 18px 18px 4px 18px;
  font-size: 1rem; line-height: 1.6; max-width: 85%;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2); word-break: break-word;
}

.message-wrapper.bot-wrapper { justify-content: flex-start; align-items: flex-start; }
.bot-avatar {
  background: transparent;  
  width: auto;              
  height: auto;
  border-radius: 0;       
  display: flex;           
  align-items: flex-start;
  margin-right: 8px;        
  margin-top: 2px;
}
.bot-message-content {
  color: var(--text-main); font-size: 1rem; line-height: 1.6;
  padding-top: 5px; flex: 1; word-break: break-word;
}

/* Input Area */
.input-area-wrapper {
  position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px;
  background: linear-gradient(to top, var(--bg-core) 80%, transparent);
  display: flex; justify-content: center;
}

.input-container {
  width: 100%; max-width: 800px; background-color: var(--input-bg);
  border-radius: 30px; padding: 8px 10px 8px 25px;
  display: flex; align-items: center; gap: 10px;
  border: 1px solid transparent; transition: 0.2s;
}
.input-container:focus-within { background-color: #282a2c; border-color: #5e5e5e; }

.input-container input {
  flex: 1; background: transparent; border: none; color: white;
  font-size: 1rem; outline: none; padding: 10px 0; margin: 0;
}

.send-btn {
  width: 40px; height: 40px; border-radius: 50%; margin-top: 0;
  background: white; color: black; border: none; padding: 0;
  display: flex; justify-content: center; align-items: center;
  cursor: pointer; transition: 0.2s; flex-shrink: 0;
}
.send-btn:hover { transform: scale(1.1); }
.send-btn.disabled { opacity: 0.5; cursor: not-allowed; transform: none; background: #666; }

/* Overlay for Mobile Sidebar */
.sidebar-overlay {
  display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0,0,0,0.5); z-index: 40; backdrop-filter: blur(2px);
}
.sidebar-overlay.active { display: block; }

/* --- MOBILE RESPONSIVENESS --- */
@media (max-width: 768px) {
  /* Login/Signup Responsive */
  .auth-box { width: 90%; padding: 1.5rem; }
  
  /* Sidebar Logic */
  .sidebar {
    position: fixed; top: 0; left: -280px; /* Hide off-screen */
    height: 100%; box-shadow: 5px 0 15px rgba(0,0,0,0.5);
  }
  .sidebar.active { left: 0; } /* Show when active */
  
  /* Show Menu Button */
  .mobile-menu-btn { display: block; }
  
  /* Chat Adjustments */
  .message-wrapper { padding: 0 15px; gap: 10px; }
  .user-message-content { max-width: 90%; font-size: 0.95rem; }
  .bot-message-content { font-size: 0.95rem; }
  
  .input-area-wrapper { padding: 10px; }
  .input-container { padding: 5px 5px 5px 15px; }
}

/* Utilities */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #444746; border-radius: 4px; }
@keyframes slideUp { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
/* --- Typing Indicator Animation --- */
.typing-dots {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 5px 0;
  height: 24px; 
}

.dot {
  width: 8px;
  height: 8px;
  background-color: var(--text-muted); /* كيأخذ اللون الرمادي لي ديجا عندك */
  border-radius: 50%;
  animation: typing-bounce 1.4s infinite ease-in-out both;
}

.dot:nth-child(1) {
  animation-delay: -0.32s;
}

.dot:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes typing-bounce {
  0%, 80%, 100% {
    transform: scale(0);
    opacity: 0.5;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}